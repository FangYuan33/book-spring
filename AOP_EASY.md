## aop_easy

![img.png](img.png)

只要方法的**开始 / 结束**都有相同的逻辑，那我们就可以把这些逻辑都拿出来视为一体，这个思想就叫**横切**。
图中红框我们称它为**横切面Aspect**，**表示的是分布在一个 / 多个类的多个方法中的相同逻辑。**

使用**动态代理**，将这部分**相同的逻辑**抽取为**一个独立的`Advisor`增强器**，并在原始对象的初始化过程中，**动态`组合`原始对象并产生代理对象**。

通过这种方式，**在不修改原始代码的情况下，对已有的任意代码进行了增强**，这个**针对代码的扩展和抽取的过程，就是面向切面编程。**

### 1. jdk动态代理

jdk 的动态代理，要求被代理的对象所属类**必须实现一个以上的接口**，代理对象的创建使用 `Proxy.newProxyInstance` 方法，该方法中有三个参数

- `ClassLoader loader`：被代理的对象所属类的类加载器
- `Class<?>[] interfaces`：被代理的对象所属类实现的接口
- `InvocationHandler h`：代理的具体代码实现

具体实现在 `InvocationHandler`的**`invoke方法`**中，这个方法的有三个参数

- `Object proxy`：**被代理后的**对象引用
- `Method method`：代理对象**执行的方法**
- `Object[] args`：代理对象**执行方法的参数列表**